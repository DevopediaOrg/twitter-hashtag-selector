import tweepy
import re


def tweepy_auth(api_key, api_secret_key, access_token, access_token_key):
    """Authentication using twitter api_key, api_secret_key, access_token,
    and access_token_key

    api_key: get the key from twitter developer account.
    api_secret_key: get the secret key from twitter developer account.
    access_token: get the access token from twitter developer account.
    access_token_secret: get the access token key from twitter developer account.
    returns: it returns twitter authentication api.
    """
    auth = tweepy.OAuthHandler(api_key, api_secret_key)
    auth.set_access_token(access_token, access_token_key)
    api = tweepy.API(auth)
    return api


def keyword_search(keyword):
    """Keyword search function to returns related hash tags.

    keyword: input text to search all the twitter hash tags.
    returns: list of unique hash tags realated to input keyword.
    """
    api_key = "iAS1zIpKQ6Up3rQzQYltaSpZh"
    api_secret_key = "JpBIPGzSc2cpP7KJ9oL2b0yUtdkWwM1qp5ZV7ZmkIB1uP4aYyb"
    access_token = "2578113560-V00ppm6M8GEBdzUVpA4bHLI0dc5h5edcvKMXufh"
    access_token_key = "no30pcnbtFGU292iUNRjbiQbDqornjPx0EQK3MJCXTli6"

    api = tweepy_auth(api_key, api_secret_key, access_token, access_token_key)
    hash_tag = []
    for text in api.search(q=keyword, lang="en", ):
        tags = re.findall(r"(#\w+)", str(text))
        hash_tag.extend(tags)
    return set(hash_tag)    


print(keyword_search("machine"))

